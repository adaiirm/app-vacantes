{% extends "base.html" %}

{% block title %}Todas las Vacantes - My Company{% endblock %}

{% block content %}
  <div class="masthead">
    <h3 class="text-muted">My Company</h3>
    <nav>
      <ul class="nav nav-justified">
        <li><a href="{{ url_for('main.index') }}">Inicio</a></li>
        <li><a href="{{ url_for('main.admin') if 'user_id' in session else url_for('auth.login') }}">Administración</a></li>
        <li><a href="{{ url_for('main.acerca') }}">Acerca</a></li>
      </ul>
    </nav>
  </div>

    <!-- Formulario de búsqueda -->
  <form method="get" action="{{ url_for('vacante.buscar') }}" class="navbar-form navbar-right">
    <div class="form-group">
      <input type="text" name="query" required placeholder="Buscar oferta..." class="form-control">
    </div>        
    <button type="submit" class="btn btn-success">Buscar</button>
  </form>

  <h2 class="text-center">Todas las Vacantes</h2>
  <div class="panel panel-default">
    <div class="panel-body">
      {% if vacantes %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-center">ID</th>
              <th class="text-center">Vacante</th>
              <th class="text-center">Publicado</th>
              <th class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for vacante in vacantes %}
              <tr>
                <td class="text-center">{{ vacante.id }}</td>
                <td class="text-center">{{ vacante.nombre }}</td>
                <td class="text-center">{{ vacante.fecha_publicacion.strftime('%d/%m/%Y') }}</td>
                <td class="text-center">
                  <a class="btn btn-info btn-sm" href="{{ url_for('vacante.detalle_vacante', id=vacante.id) }}" role="button">Ver Detalles</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div class="alert alert-info">No hay vacantes disponibles en este momento.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}
